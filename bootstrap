#/bin/sh

show_help_and_quit() {
	cat <<EOF
Usage: $0 [<command>]

Commands:
	help | -h | --help   show this message
	clean                remove all autogenerated files
	init                 bootstrap autotools [default]
EOF
	exit 1
}

init() {
	mkdir -p ac-m4 ac-aux
	autoreconf --install
	exit 0
}

if test $# -eq 0; then
	init
fi

case $1 in
	clean)
		test -f Makefile && make distclean
		rm -rf \
			aclocal.m4 \
			autom4te.cache \
			ac-aux \
			ac-m4 \
			config.h.in \
			configure \
			src/Makefile.in \
			test/Makefile.in \
			Makefile.in
		;;
	init)
		init
		;;
	*)
		show_help_and_quit
		;;
esac
